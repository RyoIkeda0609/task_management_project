# モバイルアプリケーション開発の事前準備

## 前提

- 私はモバイルアプリケーションを作成し、販売したい
- 作りたいアプリケーションの構想はある
- あなたは優秀なエンジニアとして、私のアプリケーション開発を補助する役割を担う
- あなたは私の質問に対してハルシネーションを避け、あいまいな回答や正しいか検証が十分でない回答は避ける

## 現状

- 私は現時点で、タスク管理アプリケーションの作成を行いたいと考えている
- アプリケーションの開発に際して、企画、要件定義、設計に相当する簡単な資料を作成している
  - root/docs/spec/overview.md
- アプリケーションの開発に際して、使用する言語やフレームワークは Flutter が良いと考えている
  - overview.mdを作成したため、こちらをもとに、あなたにはレビューをしたり、ドキュメントを生成したりしてほしい

## 検討中の方針

- 作成した overview.md をもとに、あなたが私に不明点をヒアリングする
- 私が答えた内容をもとに、あなたがドキュメントのアップデートを行う
- 不明点がなくなり、必要な成果物がすべてFIXするまで、これを繰り返す

## 依頼事項のまとめ

- 上記の前提、現状、方針を読み、私のアプリケーション作成をリードしてください
- 必要な工程、作業、成果物を明記し、ドキュメント化してください
- 作業を行うときには、私に質問をして不明点を明確にしてから作業してください

よろしくお願いします！！

---

第1段階：プロダクト戦略の確認
以下の項目について、ご回答をお願いします：

Q1: ターゲットユーザー
ペルソナ：「高校2年生、大学受験」が想定ユーザーのようですが、このアプリを使う対象は他にもいますか？
例：社会人、勉強以外の目標（運動、キャリア構築など）
または、受験生に完全に限定していますか？

A1:はい、このアプリを使う対象はほかにもいます
ペルソナはあくまで例として挙げただけで、このアプリは「目的を達成したいと思うすべての人」に対して使用していただきたいです。
例えば、以下のようなユーザーには特に効果があると思っています。

- 「今年の夏までに体重を10キロ落としたい」と思っている20代女性
- 「志望している業界で働きたい」と思っている就活生
- 「このゲームの大会で優勝したい」と思っているゲーマー
  などなど

Q2: ビジネス規模と現実性
月100万円、1,000DLという目標設定の根拠を教えてください
実現可能性の検証はできていますか？（市場規模、競合分析など）
または、現段階では仮定の数字ですか？

A2:はい、現段階では仮定の数字です
あくまで「月の売上で100万円達成したい」というのが私のゴールであり、「月間1000ダウンロード」「価格設定が1000円」「アプリ開発」などが私のマイルストーンです。

Q3: プロダクト差別化
「ゴール → マイルストーン → タスク」という3階層構造は多くのアプリで採用されています
他アプリとの差別化ポイントは何ですか？
UIの工夫、UX工夫、機能の工夫など

A3:現時点で差別化ポイントが十分に検討できているわけではないです。
これも明確にしていただきたいです。
どんな方向性で売り出すのが良いか、イメージがあればそれもドキュメントに反映して下さい。

Q4: MVP（最小限の製品）の定義
overview.md では「通知機能なし」とありますが、他に MVP段階では未実装 にしたい機能はありますか？
クラウド同期、共有、AI提案などは含めますか？

- クラウド同期(いずれはしたいが今ではない)
- AI提案(いずれはしたいが今ではない)
- SNS連携(いずれはしたいが今ではない)
- テーマ変更(いずれはしたいが今ではない)
- Webアプリ対応(いずれはしたいが今ではない)
- カテゴリ追加機能(いずれはしたいが今ではない)
- 共有(いずれはしたいが今ではない)
- 広告対応(いずれはしたいが今ではない)
- ログイン機能(必要ではないかもしれない、が、クラウド連携で必要であればいずれしてもよいかもしれない、くらい)

ほかにもあなたが必要かどうか、迷う機能があればそれも判断しますので質問してください。

Q5: データ永続化の詳細

ローカルデータ保存について、SQLite、Hive、SharedPreferences など、何を使うかご意向はありますか？
または、フレームワーク側に判断を委ねていただきたいですか？

A5:特に意向はないです。
使いやすいのはどれでしょうか？要件を満たすために一番適したものにしたいです。そのうえで、要件が不足していれば追加で質問してください。

Q6: 達成時の演出

方向性1で「達成体験」を挙げていますが、花火やメダルなど、派手な演出を好みますか？
それとも、シンプルな設計を好みますか？（方向性3の観点）

A6:シンプルな設計を好みます。達成率の自動変更やぱちぱちするインタラクションはあるとよいと思いますが、必須ではないです。

Q7: ユーザー導入時の体験

アプリ起動時に「初回説明画面」とありますが、チュートリアルやオンボーディングの充実度についてどう考えていますか？
「すぐに使い始めたい派」か「しっかり学びたい派」か

すくに使い始めたい派です、が、「まずはゴールを設定しましょう」のような文言があってもよいかもしれないです。

差別化ポイントの提案への回答について
私は「方向性3」が一番しっくりきます。
とにかく「ゴールは何で、そのために達成すべきマイルストーンは何で、そのためにやるべきタスクは何か」をユーザーが迷わず入力でき、それを達成することで、ゴールの達成に寄与するアプリにしたいです。
シンプルなUI/UXで使いやすく、継続しやすく、達成しやすい、ユーザーのためになるアプリを作成したいです。

また、追加の情報ですが、./docs/prompt/qas_for_gpt.mdで、以前に検討した際の記録があります。
こちらも参考にしていしけっていしてください。

Q8: Hiveをベースに進めることで合意いただけますか？
YES

Q9: ドキュメント体裁について

qas_for_gpt.md で列挙されている「必要だと思っているドキュメント」リストに対して、overview.md に全て統合すべきですか？
或いは、overview.md は「概要」に留め、詳細は「要件定義書」「設計書」として別ファイル化すべきですか？
A) 統合型 → 1ファイルで完結（見直しやすい）
B) 分割型 → 複数ファイルに分割（モジュール化、将来の拡張に強い）

Bの分割型でお願いします。
また、不足している点は検討して追加していただいて構いません。

❓ 開始前の最終確認
以下、3つのポイントについて、簡潔にご確認ください。確認後、すぐにドキュメント作成に着手します。

Q10: UI/UXの詳細設計について
qas_for_gpt.md のQ15で「下タブ構成」が選ばれていますね。具体的な構成について、以下の内容で合意いただけますか？

ボトムタブナビゲーション（3タブ）：

ホーム（ゴール一覧） - デフォルト表示
今日のタスク - 本日実施すべきタスク一覧
設定 - アプリ設定（今後拡張予定）
各タブ内での画面遷移：

ホーム → ゴール詳細 → マイルストーン確認 → リストビュー/ピラミッドビュー/カレンダービュー
今日のタスク → タスク詳細 → 親マイルストーン・親ゴール確認
合意いただけますか？ Yes/No または修正案：YES

Q11: 初回体験フロー（オンボーディング）について
qas_for_gpt.md では「すぐに使い始めたい派、かつ『ゴール設定を促す文言』がよい」と仰っていました。以下で合意いただけますか？

初回起動時のフロー：

スプラッシュ画面（アプリ名・ロゴ表示）
簡潔なオンボーディング画面（1〜2ステップ）
「このアプリの思想」を1文で説明
「次へ」ボタンでゴール作成画面へ
ゴール作成画面へ直接遷移
「最初のゴールを設定しましょう」という誘導文
テンプレートは 提供しない（ユーザーに考えさせる）
合意いただけますか？ Yes/No または修正案：Yes

Q12: 今日のタスク画面の詳細について
qas_for_gpt.md では「複数ゴール配下のタスクを横断表示」とありました。以下で合意いただけますか？

今日のタスク画面の仕様：

本日の期限を持つ全タスク（複数ゴール・マイルストーン配下）を一覧表示
各タスク行に以下を表示：
タスク名
親ゴール名（色分けで識別）
親マイルストーン名（省略可）
ステータス（未着手 / 進行中 / 完了）
ステータス変更はインライン（クリックで切り替え）
タスク行クリック → タスク詳細画面
合意いただけますか？ Yes/No または修正案：YES

Q1: タスク・マイルストーン・ゴールの「編集履歴」について
現在のドキュメントでは、「編集可能項目」は定義されていますが、編集時の権限制限が明確ではありません。

質問：

「期限を過去日付に変更できる」ことは定義されていますが、これは何のためですか？
A) 遅延・延期を記録するため
B) タスクが期限を超過した場合の対応
または他の理由ですか？

過去日付への変更は不必要であれば削除してよいです。正直いらない機能だと思います。バリデーションではじいてよいと思います。

また、「ゴール達成後（完了後）の編集は許可するか？」という点は明記されていません。これは Phase2 以降で検討する項目ですか？

ありがとうございます。「許可しない」でいいと思います。閲覧のみ可能にできればよいと思います。

Q2: ゴール・マイルストーン・タスク削除時の「履歴保持」について
要件定義書 (2_requirements.md) では：

ゴール削除時：配下のMS・タスクをカスケード削除
確認ダイアログを表示
ですが、「削除したゴール・タスクの履歴を見たい」というユーザーニーズが出た場合、どう対応しますか？

A) 未実装（思想的に「削除したら見なくてよい」）：はい、削除された場合は見なくてよいと思います。
B) Phase2 以降で「ゴミ箱機能」を検討
C) その他

Q3: ピラミッドビュー・カレンダービューの「操作性」について
3_design.md ではビューの目的は定義されていますが、以下が不明です：

Q3-1: ピラミッドビュー

タスク数が50個を超える場合、UI的にどう対応しますか？
スクロール可能？
ズーム機能？
階層の折りたたみ？：これが良いかもしれないですね、お勧めは何でしょうか？

Q3-2: カレンダービュー

複数ゴール（3～5個）がある場合、マイルストーン・タスク期限の「色分け」をどうしますか？
ゴール毎に色を変える？
それとも MS/Task で固定色？：はい、MS/Taskで固定色は同意です。ゴールの名称を出してあげるのが良いかもしれないですね。
これらはUI上で非常に重要ですが、設計書では「期限ベース表示」とのみ記載されています。

Q4: 「今日のタスク」画面の「複数タスク」状態について
要件定義書では「複数ゴールを横断して本日が期限のタスクを表示」とありますが：

Q4-1: 本日が期限のタスクが0個の場合

画面はどう表示しますか？
「本日やるタスクはありません」というメッセージ？：はい、これでよいと思います。
「明日のタスクを表示」という代案表示？
空の一覧表示？

Q4-2: 本日が期限のタスク + 過期限のタスク

過期限（期限が昨日以前）のタスクも一緒に表示しますか？：はい、これも出してあげたほうが良いかもしれないです。ユーザーフレンドリーな気がします。
それとも「本日のみ」に厳密に限定？

Q5: 「ステータス変更」のUI/UX について
要件定義書では「長押しで状態選択メニュー表示」とありますが：

質問：

「ステータスボタン」をタップで循環（Todo → Doing → Done → Todo）させることは検討していないですか？：確かに、タップで循環のほうが良いかもしれないですね。
または「長押し」に限定した理由があれば教えてください。：とくになかったです。しいて言えば、ほかのクリックと被らないか、を懸念したためです。
このUI選択は、ユーザーの「クイック操作感」に大きく影響します。

Q6: Hiveの「スキーマ変更」対応について
技術設計書では Hive を採用していますが、将来スキーマが変わった場合の マイグレーション方針 が記載されていません。

質問：

Hive のマイグレーション（例：新フィールド追加）について、どう対応する予定ですか？
MVP段階では「スキーマ変更は想定しない」という前提ですか？
それとも、Phase2 でこれを検討する予定ですか？：どちらかというとこちらですね。MVPではスキーマはそのままが近いかもしれないです。

Q7: テスト戦略の「範囲」が曖昧です
技術設計書で「Domain / Application 層は Unit Test を必須」とありますが：

Q7-1: 進捗計算ロジック

「マイルストーン進捗 = 配下タスク平均」
これは Domain / Application どちらで実装します？：Domainのほうが私のイメージに近かったですが、いかがでしょうか？

→ どちらにしても、テストカバレッジの目標は何ですか？（80%? 90%?）：85%でいかがでしょう

Q7-2: ローカルDB操作 (Hive)

Infrastructure 層の Repository Test は「実ファイルに対するテスト」ですか？
それとも「モック化」ですか？
MVP のテスト方針を明確にしないと、実装時の齟齬が出ます。：モック化です

Q8: リリース・デプロイプロセスが未定義です
ロードマップに「2026年6月MVP リリース」とありますが：

質問：

App Store / Play Store への申請準備（プライバシーポリシー、利用規約、スクリーンショット）は、いつから準備しますか？：6月半ばごろからです
TestFlight / Google Play Beta での β テストは予定していますか？：特に予定していなかったですが必要でしょうか？
クラッシュ時のログ収集（Firebase Crashlytics など）は MVP に含めますか？：含めていないです。
これらは リリース前2～4週間から準備が必要 ですが、ロードマップに明記されていません。：必要であれば記載してください。

📝 その他の観察
細微な記述揺れ
2_requirements.md: 「誙数ゴール」は誤字（「複数ゴール」の誤植と思われます）：修正をお願いいたします。
4_architecture.md: 「DDD適用範囲」で Aggregate / Domain Service が MVP では不要とありますが、これは「本当に大丈夫」という確認ですか？（テスト設計時に重要）：ありがとうございます。絶対に適用しないというよりは、必須とはしないというほうがニュアンスが近いかもしれないですね。

回答いたしました。
以上に関して、追加で質問があればまた聞いてください。
修正いただける個所は修正をお願いいたします。全体を見て整合性は正しく保ってください。

ありがとうございます。

それではこれからは、作業者があなた、指示者・レビュワーが私で、実際にアプリケーションの開発を進めていきます。
./app/にFlutterの初期コードを準備し、ブランチも切りました。
まずは以下を確認してください。

- 開発を進めるのにあたり、ドキュメントに不足はないか
  - 明確にしておきたいが、わからない点はないか
  - 要件を取り違えているか不安な個所はないか
- 作業の進め方について
  - どのように進める方針でいるか、進め方の意思をdocs下に成果物として配置してください。
  - レビュワーが私(ジュニアエンジニア)なので、あまりたくさんのコードをレビューすることはできません。
  - また、全体の作業工程や作業内容がわからないと、今のコードが何のためにあるのかがわからなくなってしまいます。
  - そのため、作業の進め方は非常に大事にしていただきたいです。
- TDDとDDD
  - 上記の通り、作業が多くなってしまうとレビューが追い付かないです。
  - そのため、以下のような進め方はどうでしょう？
    - TDDとDDDをベースの考え方とする
    - まずはドメインを厚く、しっかり開発する
      - テストの要件(各ドメインが持つ機能の要件)をドキュメントから読み取り、必要に応じて私にヒアリングする
      - テストコードを作成する(Red)
      - ドメインのコードを作成する(Green)
      - 修正する(Refactoring)
    - 続いて、ユースケースを厚くする
      - こちらも同様にテスト、ドメイン、きれいにするの流れで行う
    - つづいて、モックを作り、インフラから情報を取得できるようにする
      - ここもテストはしっかり描きたいが、必要に応じてで構わない
    - そして、UIを作りこんでいく
      - ここも同様に、テストはドメインより少なくなってしまうのは許容する

このような進め方はどうでしょうか？
私がレビューできるように、要点や修正内容を教えてくれると助かります。

また、理想としては、最初に全体のTodoリストを作成し、docs/todo/Todo.mdのようにしてくれると助かります。

ありがとうございます！本日から実装開始ですね。🚀

実装前に、いくつか確認したい点がありますので、ご回答をお願いします。これらを明確にしてから開発を進めるため、重要なヒアリングです。

🔍 実装前の確認事項
A. プロジェクト構成の確認
A1. ./app ディレクトリの現状確認

flutter create app で作成されたテンプレートプロジェクトの状態ですね。以下を確認させてください：

質問1: flutter pub get が正常に実行できますか？任意のエラーはありませんか？：Yes

```

ikeda@FMVlifebook0609 MINGW64 ~/dev/app/task_management_project (develop/feature1)
$ cd app

ikeda@FMVlifebook0609 MINGW64 ~/dev/app/task_management_project/app (develop/feature1)
$ flutter --version
Flutter 3.38.9 • channel stable • https://github.com/flutter/flutter.git
Framework • revision 67323de285 (6 days ago) • 2026-01-28 13:43:12 -0800
Engine • hash 5eb06b7ad5bb8cbc22c5230264c7a00ceac7674b (revision 587c18f873) (6 days ago) •
2026-01-27 23:23:03.000Z
Tools • Dart 3.10.8 • DevTools 2.51.1

ikeda@FMVlifebook0609 MINGW64 ~/dev/app/task_management_project/app (develop/feature1)
$ flutter doctor
Doctor summary (to see all details, run flutter doctor -v):
[√] Flutter (Channel stable, 3.38.9, on Microsoft Windows [Version 10.0.26200.7462], locale ja-JP)
[√] Windows Version (11 Home 64-bit, 25H2, 2009)
[√] Android toolchain - develop for Android devices (Android SDK version 36.0.0)
[√] Chrome - develop for the web
[√] Visual Studio - develop Windows apps (Visual Studio Community 2022 17.13.6)
[√] Connected device (3 available)
[√] Network resources

• No issues found!

ikeda@FMVlifebook0609 MINGW64 ~/dev/app/task_management_project/app (develop/feature1)
$ flutter pub get
Resolving dependencies...
Downloading packages...
  characters 1.4.0 (1.4.1 available)
  matcher 0.12.17 (0.12.18 available)
  material_color_utilities 0.11.1 (0.13.0 available)
  meta 1.17.0 (1.18.1 available)
  test_api 0.7.7 (0.7.9 available)
Got dependencies!
5 packages have newer versions incompatible with dependency constraints.
Try `flutter pub outdated` for more information.

ikeda@FMVlifebook0609 MINGW64 ~/dev/app/task_management_project/app (develop/feature1)
$
```

質問2: pubspec.yaml に依存ライブラリを追加する必要があります。以下を追加していただきたいのですが、よろしいですか？：追加対応をしたので、確認していただきたい。

B. ドメイン層実装の最終確認
前回の Q&A で確認した 4 つのポイントについて、再度確認させてください：

B1. 進捗計算（タスク 0 個の場合）

要件：タスク数が 0 個の場合、マイルストーン進捗は 0% でよろしいですか？：YES
つまり、タスクを 1 つも作成していないマイルストーンの進捗は 0% ということですね？：Yes

B2. 期限バリデーション

確認：Task.deadline ≤ Milestone.deadline ≤ Goal.deadline を 強制（例外発生）でよろしいですか？
もし違う場合は、警告程度にしておくべきでしょうか？：バリデーションをかけてあげたいです。
作成順はゴール　→　マイルストーン　→　タスクなので、それぞれを作成、編集するタイミングで不正な日付を設定できないようにしてあげればよいと思います。

B3. ゴール達成時の自動完了

配下のマイルストーン・タスクが すべて Done になったら、Goal の進捗は自動的に 100% になる
ユーザーは Goal を手動で「完了」操作する必要はない
この理解で正しいですか？：Yes

B4. ステータス遷移の詳細

状態：Todo / Doing / Done の 3 状態のみですね？：Yes
遷移ルール：Todo → Doing → Done → Todo（循環）で、逆方向（Done → Doing）は許可しない？：Yes
それとも、任意の方向への遷移を許可しますか？：No（循環でOK）

C. テスト環境・ワークフロー

C1. テスト実行環境

このコマンドで正常にテストが実行できる状態でしょうか？:Yes

```
ikeda@FMVlifebook0609 MINGW64 ~/dev/app/task_management_project/app (develop/feature1)
$ flutter test
00:10 +1: All tests passed!
```

C2. Git ワークフロー

質問3: 開発ブランチの詳細を教えてください

ブランチ名は何ですか？（例：feature/domain-layer, develop など）
mainブランチは main
開発用のブランチは develop/XXX
例えば、今いるブランチはdevelop/feature1

PO（ユーザー）が提示された「ブランチを切った」というブランチは存在していますか？
上記のdevelop/feature1

質問4: コミット・PR レビューのルールがあれば教えてください

毎日コミット？フェーズ毎？：コミットは大きくなりすぎないくらいでしたいです。
PR レビューは実施しますか？：実施したいです。

D. テスト設計の詳細（Domain 層実装前の最終確認）
D1. 進捗計算ロジック

Domain 層に以下のロジックを実装する予定です：

この実装方針でよろしいですか？：Yes

D2. ValueObject の等価性

Entity / ValueObject のテストで、以下のように == と hashCode を実装する予定です：

こうした等価性テストで構いませんか？：Yes

E. ディレクトリ構造の確認
予定している lib 配下のディレクトリ構造です：

この構造でよろしいですか？：おおむね良いです。しかし、ValueObjectはもう少し細かくてもよいかもしれないですね。
タスクのタイトル、タスクの説明、マイルストーンのタイトル、、、などなど、それぞれValueObjectとして、不正な値が入らないようにするのが良いかもしれないです。
テストも書く場所が明確になりますしね。

F. CI/CD・ツール環境（将来用）
現段階では不要ですが、念のため確認：

質問5: テストカバレッジを測定するツール（lcov など）を使いたいですか？：特に想定はしていなかったです。

使う場合：flutter test --coverage で自動生成
使わない場合：flutter test の標準出力で確認
📋 すべての質問をまとめると

# 質問内容 優先度

Q1 flutter pub get が実行できるか 🔴 高
Q2 pubspec.yaml に依存ライブラリを追加してよいか 🔴 高
B1 タスク 0 個時の進捗は 0% でいいか 🔴 高
B2 期限バリデーションは「強制」か「警告」か 🔴 高
B3 ゴール自動完了の理解が正しいか 🔴 高
B4 ステータス遷移ルール（逆方向許可するか） 🔴 高
C1 テスト実行環境は準備完了か 🟡 中
C2 開発ブランチ名・Git ワークフロー 🟡 中
D1 進捗計算ロジック実装方針（上記コード）でいいか 🔴 高
D2 ValueObject 等価性テスト方針でいいか 🟡 中
E lib ディレクトリ構造でいいか 🟡 中
Q5 テストカバレッジ測定ツール使用有無 🟢 低
🎯 実装開始の流れ
ご回答いただく → 不明点を解消 → フェーズ1 開始

以下の順序で進めます：

✅ 上記質問にご回答
✅ 必要に応じて pubspec.yaml を更新・flutter pub get 実行
✅ lib/domain に Entity / ValueObject のスケルトンを作成
✅ test/domain に テストコードを実装（Red Phase）
✅ Domain 層コードを実装（Green Phase）
✅ リファクタリング（Refactor Phase）
お手数ですが、上記のご回答をお願いいたします。
すべて解明してから、Domain 層の実装に進みたいと思います！

❓ 次の実装前に確認したいことはありますか？
以下について確認させてください：

Q1: GoalTitle / TaskTitle などの文字列バリデーション

テストと実装を進める際に、以下のバリデーションルールを適用します：

最小文字数：1 文字以上
最大文字数：100 文字以下（仮定）
空文字列は不可
この仕様でよろしいですか？：Yes

Q2: GoalDeadline などの期限バリデーション

期限は「本日より後」（現在時刻より後）
時刻は「年月日」のみ（時分秒は不問）
この仕様でよろしいですか？：Yes

Q3: Progress 型の定義

進捗は 0～100 の int 型で管理しますが、以下で構いませんか？：Yes

上記をご確認いただければ、本日中に Goal / Milestone / Task のすべての ValueObject と Entity の実装・テストを完成させたいと思います。

いかがでしょうか？ご質問・修正をお願いします！

また、追加で要求ですが、テストのディスクリプションは日本語で記載をお願いいたします。
例えば、should create TaskStatus with todoではなく、StatusがtodoのTaskStatusが生成できること　のようになるのが良いです。よろしくお願いします！

## レビュワーからの依頼・質問

- マイルストーンのcalculateProgressの引数が整数型なのはなぜでしょうか？ゴールのcalculateProgressの引数はProgress型なので気になりました。ミスなのであれば修正お願い致します。
- task_status_test.dartのディスクリプションが英語のままなのが気になります。ほかのテストコードに平仄を合わせて修正してください。
- ValueObjectのマジックナンバーが気になりました。最大文字数が100文字の場合、100とそのまま条件比較するのではなく、maxLengthなどとしたほうが良いかと思いますがどうでしょうか？
