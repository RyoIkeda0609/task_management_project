# Phase 1: ä»•æ§˜ã¨å®Ÿè£…ã®å·®åˆ†æ¤œå‡ºãƒ¬ãƒãƒ¼ãƒˆ

## å®Ÿè¡Œæ—¥ï¼š2026å¹´2æœˆ11æ—¥

## åˆ†æå¯¾è±¡ï¼šDomain / Application / Infrastructure å±¤

---

## 1. ä»•æ§˜ã«å®šç¾©ã•ã‚ŒãŸæ©Ÿèƒ½ï¼ˆmaster_spec_for_ai.mdï¼‰

| ID   | æ©Ÿèƒ½               | å®Ÿè£…çŠ¶æ…‹ | UseCaseå               |
| ---- | ------------------ | -------- | ----------------------- |
| F-01 | ã‚´ãƒ¼ãƒ«ä½œæˆ         | âœ…å®Ÿè£…   | CreateGoalUseCase       |
| F-02 | ã‚´ãƒ¼ãƒ«æ›´æ–°         | âœ…å®Ÿè£…   | UpdateGoalUseCase       |
| F-03 | ã‚´ãƒ¼ãƒ«å‰Šé™¤         | âœ…å®Ÿè£…   | DeleteGoalUseCase       |
| F-04 | ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ä½œæˆ | âœ…å®Ÿè£…   | CreateMilestoneUseCase  |
| F-05 | ã‚¿ã‚¹ã‚¯ä½œæˆ         | âœ…å®Ÿè£…   | CreateTaskUseCase       |
| F-06 | ã‚¿ã‚¹ã‚¯çŠ¶æ…‹å¤‰æ›´     | âœ…å®Ÿè£…   | ChangeTaskStatusUseCase |
| F-07 | ä¸€è¦§å–å¾—           | âœ…å®Ÿè£…   | Get\*UseCase (è¤‡æ•°)     |
| F-08 | ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯å–å¾—   | âœ…å®Ÿè£…   | GetAllTasksTodayUseCase |

**è©•ä¾¡**: ä»•æ§˜ã«å®šç¾©ã•ã‚ŒãŸå…¨æ©Ÿèƒ½ã¯å®Ÿè£…æ¸ˆã¿

---

## 2. ä»•æ§˜ã«æœªå®šç¾©ã® UseCaseï¼ˆä»•æ§˜å¤–æ©Ÿèƒ½ï¼‰

### å•é¡Œãªä»•æ§˜å¤– UseCase

| UseCase                        | åˆ†é¡     | åˆ¤å®š | ç†ç”±                                         | æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
| ------------------------------ | -------- | ---- | -------------------------------------------- | -------------- |
| SearchGoalsUseCase             | æ¤œç´¢æ©Ÿèƒ½ | âŒ   | MVP ã‚¹ã‚³ãƒ¼ãƒ—å¤–ï¼ˆãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— Phase1.5ï¼‰      | **å‰Šé™¤å¿…é ˆ**   |
| GetTasksGroupedByStatusUseCase | è¡¨ç¤ºç”¨   | âŒ   | Presentation å±¤ã®è²¬å‹™ï¼ˆUseCaseåŒ–ä¸è¦ï¼‰       | **å‰Šé™¤å¿…é ˆ**   |
| CalculateProgressUseCase       | ãƒ“ã‚¸ãƒã‚¹ | âš ï¸   | Domain Service ã§å®Ÿè£…ã™ã¹ãï¼ˆUseCaseåŒ–ä¸è¦ï¼‰ | **å‰Šé™¤å¿…é ˆ**   |

### å¿…é ˆãªè¿½åŠ æ©Ÿèƒ½ UseCaseï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œã«å¿…è¦ï¼‰

| UseCase                      | åˆ†é¡     | åˆ¤å®š | ç†ç”±                                     | çŠ¶æ…‹   |
| ---------------------------- | -------- | ---- | ---------------------------------------- | ------ |
| GetGoalByIdUseCase           | è©³ç´°å–å¾— | âœ…   | è©³ç´°ç”»é¢ãƒ»æ›´æ–°æ™‚ã«å¿…é ˆ                   | å®Ÿè£…æ¸ˆ |
| GetMilestonesByGoalIdUseCase | ä¸€è¦§å–å¾— | âœ…   | Goal ã® Milestone ã‚’å–å¾—ã™ã‚‹ã®ã«å¿…é ˆ     | å®Ÿè£…æ¸ˆ |
| GetTasksByMilestoneIdUseCase | ä¸€è¦§å–å¾— | âœ…   | Milestone ã®ã‚¿ã‚¹ã‚¯ã‚’å–å¾—ã™ã‚‹ã®ã«å¿…é ˆ     | å®Ÿè£…æ¸ˆ |
| UpdateMilestoneUseCase       | æ›´æ–°æ©Ÿèƒ½ | âœ…   | ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³ç·¨é›†ã«å¿…é ˆï¼ˆä»•æ§˜F-02ç›¸å½“ï¼‰ | å®Ÿè£…æ¸ˆ |
| DeleteMilestoneUseCase       | å‰Šé™¤æ©Ÿèƒ½ | âœ…   | Goal å‰Šé™¤æ™‚ã® cascade å‰Šé™¤ã«å¿…é ˆ         | å®Ÿè£…æ¸ˆ |
| UpdateTaskUseCase            | æ›´æ–°æ©Ÿèƒ½ | âœ…   | ã‚¿ã‚¹ã‚¯ç·¨é›†ã«å¿…é ˆï¼ˆä»•æ§˜F-02ç›¸å½“ï¼‰         | å®Ÿè£…æ¸ˆ |
| DeleteTaskUseCase            | å‰Šé™¤æ©Ÿèƒ½ | âœ…   | Milestone å‰Šé™¤æ™‚ã® cascade å‰Šé™¤ã«å¿…é ˆ    | å®Ÿè£…æ¸ˆ |

**è©•ä¾¡**: ã“ã‚Œã‚‰ã®è¿½åŠ æ©Ÿèƒ½ã¯ã€Œéšå±¤ãƒ«ãƒ¼ãƒ«ã€ã¨ã€ŒCRUDæ“ä½œã€ã‹ã‚‰å¿…ç„¶çš„ã«å¿…è¦

---

## 3. ç¾åœ¨ã®å®Ÿè£…çŠ¶æ…‹

### 3.1 UseCase ç·æ•°

- **ä»•æ§˜å®šç¾©**: 8å€‹ âœ…
- **è¿½åŠ å¿…é ˆ**: 7å€‹ âœ…
- **ä»•æ§˜å¤–ã§å‰Šé™¤ã™ã¹ã**: 3å€‹ âŒ
- **å®Ÿè£…æ¸ˆã¿åˆè¨ˆ**: 18å€‹

### 3.2 å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

```
âœ… lib/application/use_cases/goal/
   - create_goal_use_case.dart
   - update_goal_use_case.dart
   - delete_goal_use_case.dart
   - get_all_goals_use_case.dart
   - get_goal_by_id_use_case.dart
   - search_goals_use_case.dart âŒ å‰Šé™¤å¯¾è±¡

âœ… lib/application/use_cases/milestone/
   - create_milestone_use_case.dart
   - get_milestones_by_goal_id_use_case.dart
   - update_milestone_use_case.dart
   - delete_milestone_use_case.dart

âœ… lib/application/use_cases/task/
   - create_task_use_case.dart
   - get_tasks_by_milestone_id_use_case.dart
   - update_task_use_case.dart
   - delete_task_use_case.dart
   - change_task_status_use_case.dart
   - get_all_tasks_today_use_case.dart
   - get_tasks_grouped_by_status_use_case.dart âŒ å‰Šé™¤å¯¾è±¡

âœ… lib/application/use_cases/progress/
   - calculate_progress_use_case.dart âŒ å‰Šé™¤å¯¾è±¡
```

---

## 4. ä»•æ§˜éµå®ˆçŠ¶æ³ã®è©³ç´°è©•ä¾¡

### 4.1 ç·¨é›†åˆ¶é™ï¼ˆè¶…é‡è¦ï¼‰

**ä»•æ§˜è¦ä»¶**: é€²æ—100%ã«ãªã£ãŸè¦ç´ ã¯ç·¨é›†ä¸å¯

**ç¢ºèªçŠ¶æ³**:

- âœ… UpdateGoalUseCase: `_goalCompletionService.isGoalCompleted()` ãƒã‚§ãƒƒã‚¯å®Ÿè£…
- âš ï¸ UpdateMilestoneUseCase: å®Œäº†åˆ¤å®šãƒã‚§ãƒƒã‚¯ç¢ºèªå¿…é ˆ
- âš ï¸ UpdateTaskUseCase: å®Œäº†åˆ¤å®šãƒã‚§ãƒƒã‚¯ç¢ºèªå¿…é ˆ

**è©•ä¾¡**: éƒ¨åˆ†çš„å®Ÿè£…ï¼ˆè©³ç´°ç¢ºèªå¾…ã¡ï¼‰

### 4.2 é€²æ—è¨ˆç®—ã®è‡ªå‹•åŒ–

**ä»•æ§˜è¦ä»¶**: ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãªã—ã€è‡ªå‹•è¨ˆç®—ã®ã¿

**ç¾çŠ¶**: CalculateProgressUseCase ã¨ã—ã¦æ˜ç¤ºåŒ–ã•ã‚Œã¦ã„ã‚‹ãŒã€ä»¥ä¸‹ã®èª²é¡Œã‚ã‚Š

- Domain Serviceï¼ˆGoalCompletionServiceï¼‰ã¨ã—ã¦å®Ÿè£…ã™ã¹ã
- UseCaseåŒ–ã¯ä¸é©åˆ‡

**è©•ä¾¡**: å®Ÿè£…ã¯å­˜åœ¨ã™ã‚‹ãŒã€è¨­è¨ˆãŒä¸é©åˆ‡

### 4.3 Repository ä¿è¨¼

**ä»•æ§˜è¦ä»¶**:

- ä¿å­˜ã—ãŸã‚‰å–å¾—ã§ãã‚‹
- å‰Šé™¤ã—ãŸã‚‰å–å¾—ã§ããªã„
- IDã¯ä¸€æ„

**ç¾çŠ¶**: Infrastructure å±¤ã®å®Ÿè£…ç¢ºèªå¾…ã¡

**è©•ä¾¡**: ç¢ºèªä¸å¯ï¼ˆæ¬¡ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

### 4.4 éšå±¤ãƒ«ãƒ¼ãƒ«

**ä»•æ§˜è¦ä»¶**:

```
Goal
  â””â”€ Milestone
     â””â”€ Task
```

**ç¢ºèªäº‹é …**:

- Task ã® milestoneId å‚ç…§: âœ…
- Milestone ã® goalId å‚ç…§: âœ…
- éšå±¤ã®é£›ã³è¶Šã—é˜²æ­¢: âš ï¸ ç¢ºèªå¾…ã¡

**è©•ä¾¡**: åŸºæœ¬è¨­è¨ˆã¯æ­£ã—ã„

---

## 5. å‰Šé™¤å¯¾è±¡ UseCase ã®åˆ†æ

### 5.1 SearchGoalsUseCase

**æ¦‚è¦**: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ã‚´ãƒ¼ãƒ«ã‚’æ¤œç´¢ã™ã‚‹æ©Ÿèƒ½

**å‰Šé™¤ç†ç”±**:

1. MVP ã‚¹ã‚³ãƒ¼ãƒ—å¤–ï¼ˆä»•æ§˜ã«è¨˜è¼‰ãªã—ï¼‰
2. ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ— Phase1.5 ã¨ã—ã¦æ˜è¨˜
3. ç¾åœ¨ãƒ•ã‚§ãƒ¼ã‚ºã§ã¯ã€ŒåŸºæœ¬CRUDã€ã«é›†ä¸­ã™ã¹ã

**å‰Šé™¤æ–¹é‡**:

- lib/application/use_cases/goal/search_goals_use_case.dart ã‚’å‰Šé™¤
- use_case_providers.dart ã‹ã‚‰ Provider å‰Šé™¤
- ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤

### 5.2 GetTasksGroupedByStatusUseCase

**æ¦‚è¦**: ã‚¿ã‚¹ã‚¯ã‚’ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–

**å‰Šé™¤ç†ç”±**:

1. è¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ï¼ˆPresentation å±¤ã®è²¬å‹™ï¼‰
2. UseCase ã¯ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œå˜ä½ã€ã§ã‚ã‚‹ã¹ã
3. Repository ã‹ã‚‰å…¨å–å¾—ã—ã¦ã€UIå´ã§ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã™ã¹ã

**å‰Šé™¤æ–¹é‡**:

- lib/application/use_cases/task/get_tasks_grouped_by_status_use_case.dart ã‚’å‰Šé™¤
- use_case_providers.dart ã‹ã‚‰ Provider å‰Šé™¤
- Presentation å±¤ã®ç”»é¢ãƒ­ã‚¸ãƒƒã‚¯ã§ directoryã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã«å¤‰æ›´

### 5.3 CalculateProgressUseCase

**æ¦‚è¦**: é€²æ—è¨ˆç®—ã‚’æ˜ç¤ºçš„ãª UseCase ã¨ã—ã¦å®Ÿè£…

**å‰Šé™¤ç†ç”±**:

1. é€²æ—è¨ˆç®—ã¯ã€Œãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã€ï¼ˆDomain ã®è²¬å‹™ï¼‰
2. UseCase åŒ–ã¯éåº¦ãªç²’åº¦åˆ†å‰²
3. Domain Serviceï¼ˆex: GoalCompletionServiceï¼‰ã§å……åˆ†
4. UI ã‹ã‚‰ç›´æ¥ Domain Service ã‚’å‘¼ã¶ã¹ã

**å‰Šé™¤æ–¹é‡**:

- lib/application/use_cases/progress/calculate_progress_use_case.dart ã‚’å‰Šé™¤
- Domain Service ã®å®Ÿè£…ã‚’ç¢ºèªãƒ»å¼·åŒ–
- Provider å‰Šé™¤

---

## 6. è¿½åŠ ã§ç¢ºèªã™ã¹ãé …ç›®

### 6.1 Domain Services

**ç¾çŠ¶ã® Domain Service**:

- GoalCompletionService

**ç¢ºèªé …ç›®**:

- [ ] é€²æ—è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã®ç§»è¡Œã‚¿ãƒ¼ã‚²ãƒƒãƒˆ
- [ ] ä»–ã« Domain Service ãŒå¿…è¦ã‹æ¤œè¨

### 6.2 ç·¨é›†åˆ¶é™ã®å®Œå…¨åŒ–

**ç¢ºèªå¯¾è±¡**:

- [ ] UpdateMilestoneUseCase ã§ã®å®Œäº†åˆ¤å®š
- [ ] UpdateTaskUseCase ã§ã®å®Œäº†åˆ¤å®š
- [ ] è¦ªã®å®Œäº†çŠ¶æ…‹ã‚‚è€ƒæ…®ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹

**ä¾‹**: Milestone ãŒ 100% ãªã‚‰ã€ãã®é…ä¸‹ã® Task ã¯å…¨ã¦ Done

- ã“ã‚Œã¯è‡ªå‹•ãƒ«ãƒ¼ãƒ«ã‹ã€æ‰‹å‹•åˆ¶é™ã‹?

### 6.3 Cascade å‰Šé™¤ã®å®Ÿè£…ç¢ºèª

**ç¢ºèªå¯¾è±¡**:

- [ ] Goal å‰Šé™¤æ™‚ã® Milestone / Task cascade
- [ ] Milestone å‰Šé™¤æ™‚ã® Task cascade
- [ ] Repository å±¤ã§ã®å®Ÿè£…

---

## 7. å®Œäº†æ¡ä»¶ãƒã‚§ãƒƒã‚¯

### Phase 1 ã‚’å®Œäº†ã¨ã™ã‚‹ãŸã‚ã®ç¢ºèªé …ç›®

| é …ç›®                              | çŠ¶æ…‹       | å‚™è€ƒ                    |
| --------------------------------- | ---------- | ----------------------- |
| ä»•æ§˜ã«å®šç¾©ã•ã‚ŒãŸæ©Ÿèƒ½ (F-01ï½F-08) | âœ…å®Ÿè£…æ¸ˆ   | å…¨æ©Ÿèƒ½å®Ÿè£…ç¢ºèª          |
| å‰Šé™¤å¯¾è±¡æ©Ÿèƒ½ã®ç‰¹å®š                | âœ…å®Œäº†     | 3å€‹ã®ä»•æ§˜å¤–æ©Ÿèƒ½ã‚’ç‰¹å®š   |
| å¿…é ˆè¿½åŠ æ©Ÿèƒ½ã®ç¢ºèª                | âœ…å®Œäº†     | 7å€‹ã®å¿…é ˆæ©Ÿèƒ½ã‚’ç¢ºèª     |
| ç·¨é›†åˆ¶é™ã®éƒ¨åˆ†å®Ÿè£…ç¢ºèª            | âš ï¸éƒ¨åˆ†ç¢ºèª | è©³ç´°ç¢ºèªå¾…ã¡            |
| é€²æ—è¨ˆç®—ã®å®Ÿè£…ç¢ºèª                | âš ï¸ç¢ºèªå¾…ã¡ | Domain Service ç¢ºèªå¾…ã¡ |
| Repository ä¿è¨¼ã®ç¢ºèª             | âŒæœªç¢ºèª   | Phase 2-3 ã§ç¢ºèªäºˆå®š    |

---

## 8. æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºã¸ã®æ¨å¥¨ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### å³åº§ã«å®Ÿæ–½ã™ã¹ãï¼ˆPhase 1.5ï¼‰

1. **å‰Šé™¤ä½œæ¥­** - ä»•æ§˜å¤– UseCase 3å€‹ã‚’å‰Šé™¤
2. **ç·¨é›†åˆ¶é™ã®å®Œå…¨åŒ–ç¢ºèª** - UpdateMilestoneUseCase ã¨ UpdateTaskUseCase ã§å®Œäº†åˆ¤å®šã‚’è¿½åŠ 
3. **Domain Service æ•´ç†** - CalculateProgressUseCase ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ GoalCompletionService ã¸ç§»ç®¡

### Phase 2 ä»¥é™ã§ç¢ºèª/å®Ÿè£…

1. **Domain å¼·åŒ–** - ä¸å¤‰æ¡ä»¶ã®æœ€çµ‚ç¢ºèª
2. **ç·¨é›†åˆ¶é™ãƒ†ã‚¹ãƒˆ** - 100% å®Œäº†æ™‚ã®ç·¨é›†ç¦æ­¢ãƒ†ã‚¹ãƒˆ
3. **cascade å‰Šé™¤ãƒ†ã‚¹ãƒˆ** - è¦ªå‰Šé™¤æ™‚ã®å­å‰Šé™¤ç¢ºèª
4. **Repository å‹•ä½œæ¤œè¨¼** - ä¿å­˜/å–å¾—/å‰Šé™¤ã®3ã¤ã®ä¿è¨¼ã‚’ç¢ºèª

---

## 9. æœ€çµ‚è©•ä¾¡

| è¦³ç‚¹             | è©•ä¾¡ | ã‚³ãƒ¡ãƒ³ãƒˆ                             |
| ---------------- | ---- | ------------------------------------ |
| ä»•æ§˜å®Œå…¨æ€§       | ğŸŸ°   | ä»•æ§˜å®šç¾©æ©Ÿèƒ½ã¯å…¨ã¦å®Ÿè£…               |
| ä»•æ§˜é€¸è„±         | ğŸ”´   | ä»•æ§˜å¤–æ©Ÿèƒ½3å€‹ã‚’å‰Šé™¤ã™ã‚‹å¿…è¦ã‚ã‚Š      |
| ã‚³ãƒ¼ãƒ‰å“è³ª       | ğŸŸ¡   | éšå±¤è²¬å‹™ã®é€¸è„±ãƒ»è¨­è¨ˆä¸é©åˆ‡ãªéƒ¨åˆ†ã‚ã‚Š |
| ãƒ†ã‚¹ãƒˆçŠ¶æ³       | ğŸŸ¡   | æœ¬ãƒ¬ãƒãƒ¼ãƒˆå¾Œã«è©³ç´°è©•ä¾¡               |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒæœŸ | ğŸ”´   | ä»•æ§˜å¤–æ©Ÿèƒ½ãŒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«åæ˜ ãªã—   |

---

## 10. æ¨å¥¨ã•ã‚Œã‚‹æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

```
å„ªå…ˆåº¦1ï¼ˆå³åº§ï¼‰:
â˜ SearchGoalsUseCase ã‚’å‰Šé™¤
â˜ GetTasksGroupedByStatusUseCase ã‚’å‰Šé™¤
â˜ CalculateProgressUseCase ã‚’å‰Šé™¤ã—ã¦ Domain Service ã«çµ±åˆ

å„ªå…ˆåº¦2ï¼ˆPhase 2ï¼‰:
â˜ UpdateMilestoneUseCase ã«å®Œäº†åˆ¤å®šã‚’è¿½åŠ 
â˜ UpdateTaskUseCase ã«å®Œäº†åˆ¤å®šã‚’è¿½åŠ 
â˜ Cascade å‰Šé™¤ã®å®Ÿè£…ç¢ºèª

å„ªå…ˆåº¦3ï¼ˆPhase 3-4ï¼‰:
â˜ Domain Entity ã®ä¸å¤‰æ¡ä»¶ç¢ºèª
â˜ Repository å±¤ã®ä¿è¨¼ç¢ºèª
â˜ ä¾å­˜æ–¹å‘ã®ç›£æŸ»
```

---

**ä½œæˆè€…**: AI  
**ãƒ¬ãƒ“ãƒ¥ãƒ¼çŠ¶æ…‹**: äººé–“ç¢ºèªå¾…ã¡  
**æ¬¡ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹æ—¥**: TBD
