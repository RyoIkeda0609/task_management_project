# 基本設計書

## 1. ドキュメント情報

| 項目           | 内容                            |
| -------------- | ------------------------------- |
| ドキュメント名 | 基本設計書                      |
| 版番号         | 1.2                             |
| 最終更新日     | 2026年2月1日                    |
| 対象プロダクト | ゴール達成型タスク管理アプリ    |
| 作成者         | プロダクトオーナー / 設計チーム |

---

## 2. 本ドキュメントの位置づけ

本ドキュメントは、要件定義書（`2_requirements.md`）で定義された要件をもとに、
**UI / UX・画面構成・データ構造を具体的な設計として定義する公式文書**である。

- 実装者は本書をもとに画面・ロジックを実装する
- 本書は思想・要件と矛盾してはならない
- UI の自由度よりも、迷いのなさ・一貫性を優先する

---

## 3. UX設計方針（最重要）

### 3.1 基本原則

- **体験が学習である**：説明よりも操作で理解させる
- **最短距離でゴール作成へ導く**
- **自由度を与えないことで迷わせない**

### 3.2 禁止事項（UXガードレール）

- オンボーディングのスキップを許可しない
- ゴール未作成状態での通常利用を許可しない
- ゴール直下へのタスク作成を許可しない

---

## 4. 画面一覧

| No  | 画面名                 | 役割           | 備考             |
| --- | ---------------------- | -------------- | ---------------- |
| 1   | スプラッシュ画面       | 起動演出       | 短時間表示       |
| 2   | オンボーディング画面   | 思想理解・導線 | スキップ不可     |
| 3   | ゴール作成画面         | 最初の行動     | 初回は必須       |
| 4   | ゴール一覧（ホーム）   | ゴール確認     | 起動時デフォルト |
| 5   | ゴール詳細画面         | 中心画面       | MS・Task管理     |
| 6   | マイルストーン作成画面 | MS追加         | ゴール配下のみ   |
| 7   | タスク作成画面         | Task追加       | MS配下のみ       |
| 8   | リストビュー           | デフォルト表示 | 階層確認         |
| 9   | ピラミッドビュー       | 構造把握       | 視覚的           |
| 10  | カレンダービュー       | 期限把握       | 日付軸           |
| 11  | 今日のタスク           | 横断表示       | 行動集中         |
| 12  | タスク詳細画面         | 詳細確認       | 編集・状態変更   |
| 13  | 設定画面               | 最小設定       | 補助的           |

---

## 5. 画面遷移設計

### 5.1 初回起動フロー（強制）

```:text
アプリ起動
 ↓
スプラッシュ画面
 ↓
オンボーディング画面（スキップ不可）
 ↓
ゴール作成画面（必須）
 ↓
ゴール一覧（ホーム）
```

※ ゴールを1つ以上作成しない限り、ホーム画面へ遷移しない

---

### 5.2 通常起動フロー

```:text
アプリ起動
 ↓
ゴール一覧（ホーム）
```

---

### 5.3 主要遷移

```:text
ゴール一覧
 ├─ ゴール作成
 ├─ ゴール詳細
 │    ├─ ゴール編集 / 削除
 │    ├─ マイルストーン作成
 │    ├─ リストビュー（デフォルト）
 │    ├─ ピラミッドビュー
 │    └─ カレンダービュー
 ├─ 今日のタスク
 │    └─ タスク詳細
 └─ 設定
```

---

## 6. 画面設計詳細（要点）

### 6.1 オンボーディング画面

**目的**：思想理解とゴール作成への心理的準備

- 1〜2画面構成
- 短文のみで説明
- 完了後、必ずゴール作成画面へ遷移

---

### 6.2 ゴール一覧（ホーム）

**目的**：現在のゴール全体像の把握

- 表示項目：ゴール名 / 期限 / 進捗率
- ソート：期限昇順（固定）
- フィルター：活動中 / 完了済み（進捗100%）

---

### 6.3 ゴール詳細画面（中核）

**目的**：計画と行動をつなぐ中心画面

- ゴール情報（名称・期限・進捗）
- マイルストーン一覧（展開式）
- タスク一覧（リスト）
- ビュー切替（リスト / ピラミッド / カレンダー）

---

### 6.4 各ビューの詳細設計

#### 6.4.1 リストビュー（デフォルト）

- **目的**：マイルストーン→タスクの階層を直感的に操作
- **表示**：MS（展開式）> Task 階層
- **インタラクション**：
  - マイルストーン名をタップで展開・折りたたみ
  - タスクをタップで詳細画面へ遷移

#### 6.4.2 ピラミッドビュー

**目的**：ゴール内の階層構造を視覚的に表現し、全体像を把握

- **表示内容**：ゴール > マイルストーン > タスク（階層的な配置）
- **スクロール対応**：タスク数が50個を超える場合、マイルストーン毎に折りたたみ機能を提供
  - 折りたたまれたマイルストーンは「▶ [MS名]（x タスク）」と表示
  - タップで展開・折りたたみ可能
- **インタラクション**：各要素をタップで詳細画面に遷移

#### 6.4.3 カレンダービュー

**目的**：期限ベースでタスク・マイルストーンを可視化

- **表示形式**：月単位のカレンダー
- **色分け戦略**：
  - マイルストーン・タスクは固定色で表示（ゴール色ではなく、MS/Task種別で統一）
  - カレンダー上の日付にマイルストーン / タスク期限を表示
  - **複数ゴール対応**：日付セルに「Goal名: Task名」の形式で複数表示可能
- **インタラクション**：日付をタップしてその日のタスク詳細へ遷移

---

### 6.5 今日のタスク画面

**目的**：行動に集中させる

- **本日が期限のタスク表示**：複数ゴールを横断して表示
- **過期限タスクも表示**：期限が昨日以前のタスクも一緒に表示（ユーザーの忘れ防止）
- **空表示**：本日タスク・過期限タスクが0件の場合、「本日やるタスクはありません」と表示
- **表示項目**：ゴール名 / マイルストーン名 / タスク名 / 期限 / 状態
- **インタラクション**：タスクをタップで詳細画面へ遷移

---

### 6.6 タスク詳細・編集画面

**目的**：タスクの詳細確認・ステータス更新

- **表示項目**：タスク名 / 期限 / 説明 / ステータス
- **ステータス変更UI**：
  - ステータスボタン（Todo / Doing / Done）をタップで**循環**（Todo → Doing → Done → Todo）
  - クイック操作を優先（長押しメニューより単純）
- **編集**: Done 状態のタスクは編集不可（閲覧のみ）
- **削除**：確認ダイアログ表示（復元機能なし）

---

## 7. データ構造（UI視点）

```:text
Goal
 ├─ Milestone
 │    └─ Task
```

- UI 上でも常にこの階層を維持する
- 階層を飛び越える操作は存在しない

---

## 8. ナビゲーション構成

- ボトムタブ（3タブ）
  - ホーム（ゴール一覧）
  - 今日のタスク
  - 設定

※ ゴール詳細はホーム配下のスタック遷移とする

---

## 9. 設定画面（MVP最小）

- アプリ情報
- 思想・使い方説明
- お問い合わせ導線

※ テーマ変更・通知設定などは対象外

---

## 10. 本設計書の適用範囲

本設計書は、MVP（Phase1）におけるUI / UX・画面構成を対象とする。

Phase2以降での画面追加・変更は、
本設計書およびコンセプト定義書の思想と矛盾しないことを必須条件とする。
