# 実装状況・品質評価レポート

（AI修正方針決定用ドキュメント）

## 0. 総評（最初に結論）

このプロジェクトは、

DDD

Clean Architecture

UseCase分離

Repository抽象化

ValueObjectによる制約管理

がかなり高い水準で導入されています。

正直に言って、構造だけ見ると
「初学者プロジェクト」ではなく
中〜上級エンジニアが品質管理のために作っている構成です。

一方で課題は明確で、

設計は強いが、Presentation と ドキュメント同期 が追いついていない。

つまり

動く

しかし迷う

AIが触ると崩れる危険がある

状態です。

ここからのフェーズは
作る → 整える → 迷いを消す
へ移っています。

## 1. 実装カバレッジ評価

Domain

✔ 非常に充実
✔ 制約がValueObjectに閉じている
✔ 不正データ生成が困難

ほぼ理想。

Application

✔ UseCase粒度が適切
✔ 依存方向が守られている
✔ Repository経由で永続化

大きな破綻なし。

Infrastructure

✔ Hive実装あり
✔ Repository interface を満たしている

ただし後述するが、
将来の差し替えやマイグレーション耐性はまだ弱い。

Presentation

動く。
画面数も十分。

しかし

ロジック混入

Provider依存の密結合

UI責務の境界が曖昧

ここが最大の改善ポイント。

## 2. docs/spec と 実装の乖離

戦略・コンセプトレベルは概ね一致しています。
致命的な方向ズレはありません。

問題になり得るのは以下。

⚠ 機能一覧

UseCaseは揃っているが、

画面から辿れない機能

UI上で操作が閉じていない機能

が一部存在します。

例：

今日のタスク取得ロジックは強い
→ しかしユーザーの導線としての優先度が設計上強調されていない

⚠ 画面一覧

存在しない画面はほぼない。
ただし

役割が被っている

detail / edit の責務差が曖昧

⚠ 画面遷移

Routerは整理されているが、

ユーザーが「なぜここへ来たのか」

のストーリーがドキュメントに定義しきれていない。

AI改修時に破壊が起きるのはここ。

## 3. クリーンアーキテクチャ評価

結論：

7.5 / 10
設計思想はほぼ正しい。
しかし運用フェーズの強度がまだ足りない。

良い点

Domainが純粋

VOが防波堤になっている

UseCaseが薄くて正しい

Repository抽象が守られている

かなり良い。

足りない点
① Presentation → UseCase 呼び出し規律

Notifer経由での呼び出しが
統一ルールとして文章化されていない。

結果、将来
「どこに書いても動く」状態に落ちる危険がある。

② DTO / Model 分離

HiveモデルとDomainが比較的近い。

将来
API化
バックエンド連携
データ構造変更

ここで事故る可能性がある。

③ 例外設計

失敗時の扱いがまだUI主導。
アプリ全体の統一ポリシーに昇華できる。

## 4. レイヤー別レビュー

Domain層

素晴らしい。

不変条件

ID管理

ステータス遷移

テストも厚い。

正直、ここは大きく触る必要なし。

強いて言えば

Factory

DomainService の適用範囲拡張

の余地がある程度。

Application層

良い。

ただし

UseCase = 手続きの集合

になり始めると危険。

今後

Transaction管理

権限制御

監査ログ

が入る可能性を想定した抽象が欲しい。

Infrastructure層

動く。
問題ない。

しかし

⚠ Repository実装が賢すぎる

バリデーションや整合チェックが入り始めると
Domainの責務を侵食する。

インフラは愚かでいい。

Presentation層

一番の課題。

問題

UseCase呼び出しの責任位置がぶれる

UIイベントとドメイン変更の結びつきが暗黙

widget が肥大化しやすい

目指す状態

UI = 描画

状態変更 = Notifier

ビジネス判断 = UseCase

この線引きをさらに強めたい。

## 5. テスト評価

かなり良いです。

特に

VO

Entity

UseCase

Hive Repository

ここまで揃っているのは優秀。

不足しているのは
① 統合テスト

「画面操作 → 永続化 → 再取得」
のルートが薄い。

② ユーザーストーリーテスト

利用者視点での

ゴール作成

マイルストーン追加

タスク完了

進捗反映

この流れが保証されると完成度が跳ねる。

## 6. DDD成熟度

かなり高い。
入門〜中級の上位レベル。

ただし

戦術DDDは強いが
戦略DDD（境界づけられた文脈）がまだ弱い。

将来的に

分析

通知

統計

が入ると整理が必要。

## 7. UI評価

機能は揃っている。
不足はない。

問題は

「使いやすさ」より
「作りやすさ」寄り

になっている点。

改善余地

重要アクションの強調

今日やるべきことの優先表示

完了までの最短導線

プロダクト視点での磨き込みフェーズに入れる。

## 8. AIが次にやるべき修正優先順位

最優先

Presentationの責務分離ルール明文化

docs/spec と画面・遷移の同期

UseCase呼び出し規律の固定

次

統合テスト強化

例外設計統一

後回し

インフラ差し替え耐性

将来拡張の文脈分割

## 9. 点数（辛口）

アーキテクチャ：8
DDD：8
保守性：7
テスト：8
UI：6

総合：7.5

土台は強い。
磨けばプロ品質になる。
