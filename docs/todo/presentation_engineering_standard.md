# Presentation Engineering Standard

UI / Presentation 層の工業規格

目的：
最も崩れやすい Presentation を
「誰が書いても同じ」にする。

センスは禁止。
統一のみが正義。

---

## 🎯 完成状態

- 初見で構造が予測できる
- 次に書く場所が分かる
- 似た画面は似た見た目になる
- ロジックが UI に残らない

---

---

## Presentation の責務

やってよいのは：

✔ 表示  
✔ 入力受付  
✔ UseCase 呼び出し  
✔ 状態の反映

---

やってはいけない：

❌ ビジネス判断  
❌ データ整形ロジック  
❌ 進捗計算  
❌ 所属チェック

それは Domain / Application。

---

---

## ====================================

## ファイル構成規約

## ====================================

---

### 1画面 = 1 directory

例：
goal_detail/
goal_detail_page.dart
goal_detail_view_model.dart
goal_detail_state.dart
goal_detail_widgets.dart

---

---

### Page の責務

画面の骨組みのみ。

- Scaffold
- AppBar
- Provider 接続

Widget の中身は書かない。

---

---

### ViewModel

UseCase と会話する唯一の場所。

- load
- create
- update
- delete

---

UI は ViewModel を呼ぶだけ。

---

---

### State

UI 表示専用。

- loading
- error
- data

Domain を持ち込まない。
表示形式のみ。

---

---

### Widgets

見た目の部品。

ロジックを書かない。

---

---

## ====================================

## クラス設計規約

## ====================================

---

### build() を巨大にしない

条件：
スクロールが発生したら分割。

---

---

### if が増えたら widget 化

if (loading)
if (error)
if (empty)

→ コンポーネントへ。

---

---

### private を使う基準

build を読みやすくするための分割。

責務分離ではない。

---

---

## ====================================

## イベント処理規約

## ====================================

---

UI のイベントは必ず：

onTap → ViewModel.method()

UI 内でif status == ...
禁止。

---

---

## ====================================

## 命名規約

## ====================================

---

### Widget

役割が分かる。

TaskList  
GoalHeader  
EmptyView

Container / Box / Area 禁止。

---

---

### Handler

\_onCreatePressed
\_onDeleteTapped

---

---

### Provider

goalDetailViewModelProvider
推測可能に。

---

---

## ====================================

## 状態管理規約

## ====================================

---

UI は

「何を表示するか」

しか知らない。

---

Domain モデルをそのまま持ち回さない。
表示用に整形した State を作る。

---

---

## ====================================

## build の理想形

## ====================================

---

build()
├ Header
├ Body
├ Action

---

読むのに思考がいらない。

---

---

## ====================================

## AI に対する命令

## ====================================

---

AI は：

- 賢くしようとしない
- 共通化しようとしすぎない
- 書きやすさより統一を優先

---

迷ったら：

既存の最もシンプルな画面をコピー。

---

---

## ====================================

## NG シグナル

## ====================================

---

以下が出たら崩れ始めている：

- build が長い
- その場で計算している
- 条件だらけ
- Provider を直接操作
- UseCase を直接呼ぶ

---

---

## ====================================

## 完了判定

## ====================================

レビュー時：

「他の画面と同じだね」

これが出れば成功。
